package Bots;import Data.IntentNLTK;import Data.Message;import Data.SentimentNLTK;import IntentRecognizer.IntentRecognizer_NLTK;import IntentRecognizer.LocalNLTKWrapper;import SimpleResponseGenerator.ChineseResponseGenerator;import SimpleResponseGenerator.SimpleChineseSegmenter;public class SimpleChatBotUsedNLTK extends SimpleChatBot {    private final ChineseResponseGenerator responseGenerator;    public SimpleChatBotUsedNLTK() {        new LocalNLTKWrapper();        this.responseGenerator = new ChineseResponseGenerator(new SimpleChineseSegmenter());    }    private String generateEnhancedResponse(String userInput, IntentNLTK intent,                                            SentimentNLTK sentiment) {        if (!intent.getStatus().equals("success")) {            return responseGenerator.generateResponse(userInput);        }        String primaryIntent = intent.getIntents().get(0);        double confidence = intent.getConfidence();        String sentimentType = sentiment.getSentiment();        // 基于NLTK分析生成更精准的回复        switch (primaryIntent) {            case "greeting":                return getPersonalizedGreeting(sentimentType);            case "question":                return getQuestionResponse(confidence);            case "farewell":                return getFarewellResponse(sentimentType);            default:                return responseGenerator.generateResponse(userInput);        }    }    private String getPersonalizedGreeting(String sentiment) {        switch (sentiment) {            case "positive":                return "你好！看到你这么积极真让人高兴！";            case "negative":                return "你好！希望你今天能变得开心一些！";            default:                return "你好！有什么我可以帮你的吗？";        }    }    private String getQuestionResponse(double confidence) {        if (confidence > 0.8) {            return "这是一个很好的问题！让我来详细为你解答...";        } else {            return "我不太确定你的问题，能再详细说明一下吗？";        }    }    private String getFarewellResponse(String sentiment) {        switch (sentiment) {            case "positive":                return "再见！很高兴和你聊天，期待下次再见！";            case "negative":                return "再见！希望你的心情能好起来！";            default:                return "再见！祝你一切顺利！";        }    }    @Override    public void processInput(String userInput) {        String response;        IntentRecognizer_NLTK.IntentAnalysisResult intentAnalysisResult = null;        // 尝试关键词匹配命令        String keywordResponse = keywordTrieTree.search(userInput);        if (keywordResponse != null) {            response = keywordResponse;        } else {            // 使用NLTK进行深度分析            IntentRecognizer_NLTK intentRecognizer = new IntentRecognizer_NLTK();            intentAnalysisResult = intentRecognizer.recognizeIntent(userInput);            // 基于NLTK分析生成智能回复            response = generateEnhancedResponse(userInput, intentAnalysisResult.getIntent_NLTK(), intentAnalysisResult.getSentiment());        }        Message botMessage = new Message("Bots", response, intentAnalysisResult);        history.addMessage(botMessage);        context.addToContext(botMessage);    }    @Override    public void run() {        super.run();    }}