package Data;import java.util.Date;// 对话历史双向链表public class DialogueHistory {    private DialogueNode head;    private DialogueNode tail;    private DialogueNode current; // 当前查看位置    private int size;    public DialogueHistory() {        head = null;        tail = null;        current = null;        size = 0;    }    // 添加新消息    public void addMessage(Message message) {        DialogueNode newNode = new DialogueNode(message);        if (head == null) {            head = newNode;        } else {            tail.next = newNode;            newNode.prev = tail;        }        tail = newNode;        current = newNode; // 重置当前位置到最新        size++;    }    // 向前查看历史    public Message moveBackward() {        if (current == null || current.prev == null) {            return null;        }        current = current.prev;        return current.message;    }    // 向后查看历史    public Message moveForward() {        if (current == null || current.next == null) {            return null;        }        current = current.next;        return current.message;    }    // 获取当前消息    public Message getCurrent() {        return current != null ? current.message : null;    }    // 重置到最新    public void resetToLatest() {        current = tail;    }    public int getSize() {        return size;    }    // 打印所有历史    public void printHistory() {        DialogueNode temp = head;        System.out.println("=== 对话历史 ===");        while (temp != null) {            System.out.println("["+new Date(temp.message.getTimestamp()) + "] " + temp.message);            temp = temp.next;        }        System.out.println("================");    }    // 获取历史链表的尾部    public DialogueNode getTail() {        return tail;    }}