package Commands;import kong.unirest.Unirest;import kong.unirest.HttpResponse;import kong.unirest.UnirestException;import com.google.gson.JsonObject;import com.google.gson.JsonParser;import com.google.gson.JsonArray;import com.google.gson.JsonElement;/** * News60s 类用于获取每日60秒读懂世界的新闻摘要 * 通过调用第三方API获取新闻数据，并将JSON格式的数据解析为易于阅读的文本格式 */public class News60s {    /**     * 从API获取新闻并将其格式化为可读文本     *     * @return 格式化后的新闻内容字符串，包含日期、新闻列表和每日格言等信息     *         如果获取或解析失败，则返回错误提示信息     */    public static String getNews() {        try {            // 设置合理的超时时间（毫秒）            Unirest.config()                    .connectTimeout(10000)  // 10秒连接超时                    .socketTimeout(30000);  // 30秒读取超时            HttpResponse<String> response = Unirest.get("https://60api.09cdn.xyz/v2/60s")                    .asString();            // 检查HTTP状态码，确认api响应情况，200表示成功            if (response.getStatus() == 200) {                // 直接解析JSON响应                JsonObject jsonObject = JsonParser.parseString(response.getBody()).getAsJsonObject();                // 提取新闻内容并转换为普通字符串                StringBuilder news = new StringBuilder();                if (jsonObject.has("message")) {                    news.append(jsonObject.get("message").getAsString()).append("\n\n");                }                news.append("每天60s读懂世界\n");                if (jsonObject.has("data")) {                    JsonObject data = jsonObject.getAsJsonObject("data");                    // 添加日期信息                    if (data.has("date")) {                        news.append(data.get("date").getAsString());                        // 添加农历日期                        if(data.has("lunar_date")){                            news.append(" * 农历 · ").append(data.get("lunar_date").getAsString());                            // 添加星期                            if(data.has("day_of_week")){                                news.append(" / ").append(data.get("day_of_week").getAsString()).append("\n\n");                            }                        }                    }                    // 添加新闻列表                    if (data.has("news")) {                        JsonArray newsArray = data.getAsJsonArray("news");                        for (int i = 0; i < newsArray.size(); i++) {                            JsonElement newsItem = newsArray.get(i);                            news.append((i + 1)).append(". ").append(newsItem.getAsString()).append("\n");                        }                    }                    //添加格言                    if (data.has("tip")) {                        news.append("\n「").append(data.get("tip").getAsString()).append("」\n");                    }                }                return news.toString();            } else {                return "获取新闻失败，HTTP状态码: " + response.getStatus();            }        } catch (UnirestException e) {            System.err.println("获取新闻时发生错误: " + e.getMessage());            return "请稍后再试。";        } catch (Exception e) {            System.err.println("解析新闻时发生错误: " + e.getMessage());            return "请稍后再试。";        }    }}