package IntentRecognizer;import opennlp.tools.doccat.*;import opennlp.tools.util.*;import java.io.*;import java.nio.charset.StandardCharsets;import java.nio.file.Files;/** * OpenNLP文档分类模型训练器 * 该类用于训练OpenNLP的文档分类模型，用于意图识别功能 * 从训练数据文件中读取样本，训练模型并保存为二进制文件供后续使用 */public class OpenNLP_DoccatModelTrainer {    /**     * 训练文档分类模型     * 该方法从训练数据文件中读取样本数据，设置训练参数，训练模型并将训练好的模型保存到文件中     *     * @throws IOException 当读取训练数据文件或保存模型文件时发生IO异常     */    public static void trainModel() throws IOException {        // 读取训练数据文件        InputStream dataStream = OpenNLP_DoccatModelTrainer.class.getResourceAsStream("/intent-training-data.txt");        ObjectStream<DocumentSample> sampleStream = new DocumentSampleStream(            new PlainTextByLineStream(() -> dataStream, StandardCharsets.UTF_8));        // 设置训练参数        TrainingParameters params = new TrainingParameters();        params.put(TrainingParameters.ITERATIONS_PARAM, "100");        params.put(TrainingParameters.CUTOFF_PARAM, "1");        // 训练模型        DoccatModel model = DocumentCategorizerME.train("en", sampleStream, params, new DoccatFactory());        // 保存模型到文件        File modelFile = new File("src/main/resources/models/intent-classifier.bin");        // 确保父目录存在        if (!modelFile.getParentFile().mkdirs() && !modelFile.getParentFile().isDirectory()) {            throw new IOException("创建模型保存目录失败: " + modelFile.getParentFile().getAbsolutePath());        }        try (OutputStream modelOut = Files.newOutputStream(modelFile.toPath())) {            model.serialize(modelOut);        }        sampleStream.close();    }    /**     * 主函数，程序入口点     * 调用模型训练方法并处理可能发生的异常     *      * @param args 命令行参数     */    public static void main(String[] args) {        try {            OpenNLP_DoccatModelTrainer.trainModel();            System.out.println("模型训练完成！");        } catch (IOException e) {            System.out.println("模型训练失败："+ e.getMessage());        }    }}