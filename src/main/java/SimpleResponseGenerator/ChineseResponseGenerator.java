package SimpleResponseGenerator;import java.util.*;// 中文回答生成器public class ChineseResponseGenerator {    private final Map<String, String> responseTemplates;    private final ChineseSegmenter segmenter;    public ChineseResponseGenerator(ChineseSegmenter segmenter) {        this.segmenter = segmenter;        this.responseTemplates = new HashMap<>();        initializeTemplates();    }    private void initializeTemplates() {        // 问候类        responseTemplates.put("greeting", "你好！我是聊天机器人，很高兴为你服务。");        responseTemplates.put("greeting_morning", "早上好！今天天气不错，有什么我可以帮你的吗？");        responseTemplates.put("greeting_evening", "晚上好！忙碌了一天，休息一下吧。");        // 基本信息类        responseTemplates.put("ask_name", "我的名字是智能聊天助手，你可以叫我小智。");        responseTemplates.put("ask_age", "我是程序，所以没有实际年龄，但今天是我为你服务的第一天！");        responseTemplates.put("ask_creator", "我是由开发团队创造的智能聊天程序。");        // 功能类        responseTemplates.put("ask_time", "现在的时间是：%s");        responseTemplates.put("ask_weather", "我无法获取实时天气，但希望你那里天气宜人！");        responseTemplates.put("ask_joke", "为什么程序员总是分不清万圣节和圣诞节？因为 Oct 31 == Dec 25！");        // 情感类        responseTemplates.put("thanks", "不客气，很高兴能帮到你！");        responseTemplates.put("apology", "没关系，不用道歉。");        responseTemplates.put("compliment", "谢谢你的夸奖！我会继续努力的。");        // 问题类        responseTemplates.put("question_what", "这是一个很好的问题，让我想想怎么回答...");        responseTemplates.put("question_why", "这个问题很有意思，可能有多种原因。");        responseTemplates.put("question_how", "让我来告诉你具体的方法...");        // 告别类        responseTemplates.put("farewell", "再见！期待下次与你聊天。");        responseTemplates.put("goodnight", "晚安，祝你做个好梦！");    }    // 基于规则生成回答    public String generateResponse(String userInput) {        List<String> segments = segmenter.segment(userInput.toLowerCase());        // 规则匹配        if (containsAny(segments, "你好", "嗨", "hello", "您好")) {            return getTimeBasedGreeting();        }        if (containsAny(segments, "名字", "叫什", "称呼")) {            return responseTemplates.get("ask_name");        }        if (containsAny(segments, "年龄", "多大", "几岁")) {            return responseTemplates.get("ask_age");        }        if (containsAny(segments, "时间", "几点", "钟表")) {            return String.format(responseTemplates.get("ask_time"), new Date());        }        if (containsAny(segments, "天气", "气温", "下雨", "晴天")) {            return responseTemplates.get("ask_weather");        }        if (containsAny(segments, "笑话", "搞笑", "幽默")) {            return responseTemplates.get("ask_joke");        }        if (containsAny(segments, "谢谢", "感谢", "多谢")) {            return responseTemplates.get("thanks");        }        if (containsAny(segments, "对不起", "抱歉", "不好意思")) {            return responseTemplates.get("apology");        }        if (containsAny(segments, "再见", "拜拜", "晚安")) {            return getTimeBasedFarewell();        }        if (containsAny(segments, "什么")) {            return responseTemplates.get("question_what");        }        if (containsAny(segments, "为什么", "为何")) {            return responseTemplates.get("question_why");        }        if (containsAny(segments, "怎么", "如何")) {            return responseTemplates.get("question_how");        }        // 默认回答        return getDefaultResponse(segments);    }    private boolean containsAny(List<String> segments, String... keywords) {        for (String segment : segments) {            for (String keyword : keywords) {                if (segment.contains(keyword)) {                    return true;                }            }        }        return false;    }    private String getTimeBasedGreeting() {        Calendar calendar = Calendar.getInstance();        int hour = calendar.get(Calendar.HOUR_OF_DAY);        if (hour < 12) {            return responseTemplates.get("greeting_morning");        } else if (hour < 18) {            return responseTemplates.get("greeting");        } else {            return responseTemplates.get("greeting_evening");        }    }    private String getTimeBasedFarewell() {        Calendar calendar = Calendar.getInstance();        int hour = calendar.get(Calendar.HOUR_OF_DAY);        if (hour >= 21 || hour < 6) {            return responseTemplates.get("goodnight");        } else {            return responseTemplates.get("farewell");        }    }    public String getDefaultResponse(List<String> segments) {        // 基于关键词权重选择回答        Random random = new Random();        String[] defaultResponses = {                "这个问题很有意思，能告诉我更多细节吗？",                "我不太确定你的意思，能换种方式说吗？",                "让我想想怎么回答这个问题...",                "这是一个很好的问题！",                "你能再详细说明一下吗？",                "我还在学习中，这个问题有点难倒我了。"        };        return defaultResponses[random.nextInt(defaultResponses.length)];    }    // 添加自定义回答模板    public void addResponseTemplate(String key, String template) {        responseTemplates.put(key, template);    }}